{
   "AWSTemplateFormatVersion" : "2010-09-09",
   "Description" : "EC2",
   "Parameters" : {
    
    "STACKNAME": {
      "Description" : "Name of an existing EC2 KeyPair to enable SSH access to the instance",
      "Type": "String",
    },

    "ImageId" : {
      "Type" : "String",
      "Default" : "ami-66506c1c",
    },

    "InstanceType" : {
      "Type" : "String",
      "Default" : "t2.micro",
      "AllowedValues" : ["t2.micro", "m1.small", "m1.large"],
      "Description" : "Enter t2.micro, m1.small, or m1.large. Default is t2.micro."
    },

    "Size" : {
      "Type" : "Number",
      "Default" : "16",
    },

    "VolumeType" : {
      "Type" : "String",
      "Default" : "gp2",
    },

   },

   "Resources" : {

      "EC2" : {

         "Type" : "AWS::EC2::Instance",
         "Properties" : {
            "ImageId" : { "Ref" : "ImageId" },
            "InstanceType" : { "Ref" : "InstanceType" },
            "DisableApiTermination" : "true",
            "Tags" : [
               {
                 "Key" : "Name",
                 "Value" : "MyTag"
               },  
            ]
         },
      },

      "Volume" : {
         "Type":"AWS::EC2::Volume",
         "Properties" : {
            "Size" : { "Ref" : "Size" },
            "Encrypted" : "true",
            "VolumeType" : { "Ref" : "VolumeType" },
            "AvailabilityZone" : { "Fn::GetAtt" : [ "EC2", "AvailabilityZone" ] },
         }
      }
   }
}
      